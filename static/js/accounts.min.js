!function(){"use strict";const e={container:null,init(){this.container||(this.container=document.createElement("div"),this.container.id="toast-container",this.container.className="fixed top-4 right-4 z-50 space-y-3 max-w-sm",document.body.appendChild(this.container))},show(e,t="info",n=5e3){this.init();const o={success:{bg:"bg-green-900/95",border:"border-green-700",text:"text-green-100",icon:"text-green-400",iconPath:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},error:{bg:"bg-red-900/95",border:"border-red-700",text:"text-red-100",icon:"text-red-400",iconPath:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},warning:{bg:"bg-yellow-900/95",border:"border-yellow-700",text:"text-yellow-100",icon:"text-yellow-400",iconPath:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},info:{bg:"bg-blue-900/95",border:"border-blue-700",text:"text-blue-100",icon:"text-blue-400",iconPath:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}},r=o[t]||o.info,s=document.createElement("div");return s.className=`${r.bg} border ${r.border} rounded-lg shadow-2xl p-4 flex items-start transform transition-all duration-300 ease-out translate-x-full opacity-0`,s.innerHTML=`\n        <svg class="w-6 h-6 ${r.icon} mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">\n          <path stroke-linecap="round" stroke-linejoin="round" d="${r.iconPath}" />\n        </svg>\n        <p class="${r.text} flex-1 text-sm font-medium">${e}</p>\n        <button class="ml-3 ${r.text} hover:opacity-75 transition-opacity" onclick="this.parentElement.remove()">\n          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />\n          </svg>\n        </button>\n      `,this.container.appendChild(s),setTimeout(()=>{s.classList.remove("translate-x-full","opacity-0")},10),n>0&&setTimeout(()=>{this.dismiss(s)},n),s},dismiss(e){e.classList.add("translate-x-full","opacity-0"),setTimeout(()=>{e.parentElement&&e.parentElement.removeChild(e)},300)},success(e,t=5e3){return this.show(e,"success",t)},error(e,t=5e3){return this.show(e,"error",t)},warning(e,t=5e3){return this.show(e,"warning",t)},info(e,t=5e3){return this.show(e,"info",t)}},t={modal:null,init(){this.modal||(this.modal=document.createElement("div"),this.modal.id="delete-modal",this.modal.className="fixed inset-0 z-50 hidden",this.modal.innerHTML='\n        \x3c!-- Backdrop --\x3e\n        <div class="fixed inset-0 bg-black/70 backdrop-blur-sm transition-opacity" onclick="DeleteModal.close()"></div>\n\n        \x3c!-- Modal Content --\x3e\n        <div class="fixed inset-0 flex items-center justify-center p-4">\n          <div class="bg-slate-800 rounded-xl shadow-2xl border border-red-600/30 max-w-md w-full transform transition-all scale-95 opacity-0" id="delete-modal-content">\n            \x3c!-- Icon --\x3e\n            <div class="flex items-center justify-center w-16 h-16 mx-auto mt-8 bg-red-900/30 rounded-full">\n              <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>\n              </svg>\n            </div>\n\n            \x3c!-- Content --\x3e\n            <div class="p-8 text-center">\n              <h3 class="text-2xl font-bold text-slate-100 mb-3">Confirmar Exclusão</h3>\n              <p class="text-slate-300 mb-2" id="delete-modal-message">\n                Tem certeza que deseja excluir esta conta?\n              </p>\n              <p class="text-slate-400 text-sm">\n                Esta ação não pode ser desfeita.\n              </p>\n            </div>\n\n            \x3c!-- Actions --\x3e\n            <div class="flex gap-3 px-8 pb-8">\n              <button type="button"\n                      onclick="DeleteModal.close()"\n                      class="flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-medium rounded-lg border border-slate-600 transition-all duration-200">\n                Cancelar\n              </button>\n              <button type="button"\n                      id="delete-modal-confirm"\n                      class="flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200">\n                Confirmar Exclusão\n              </button>\n            </div>\n          </div>\n        </div>\n      ',document.body.appendChild(this.modal),document.addEventListener("keydown",e=>{"Escape"!==e.key||this.modal.classList.contains("hidden")||this.close()}))},show(e,t){this.init(),e&&(document.getElementById("delete-modal-message").textContent=e);const n=document.getElementById("delete-modal-confirm"),o=n.cloneNode(!0);n.parentNode.replaceChild(o,n),o.addEventListener("click",()=>{t&&t(),this.close()}),this.modal.classList.remove("hidden"),setTimeout(()=>{const e=document.getElementById("delete-modal-content");e.classList.remove("scale-95","opacity-0"),e.classList.add("scale-100","opacity-100")},10)},close(){const e=document.getElementById("delete-modal-content");e.classList.add("scale-95","opacity-0"),e.classList.remove("scale-100","opacity-100"),setTimeout(()=>{this.modal.classList.add("hidden")},200)}},n={format(e){if(!e&&0!==e)return"";const t="string"==typeof e?parseFloat(e.replace(/\./g,"").replace(",",".")):e;return isNaN(t)?"":t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},parse(e){if(!e)return 0;const t=e.replace(/\./g,"").replace(",","."),n=parseFloat(t);return isNaN(n)?0:n},applyToInput(e){if(!e)return;if("number"===e.type&&(e.type="text"),e.addEventListener("input",e=>{const t=e.target.selectionStart,n=e.target.value;let o=n.replace(/[^\d,]/g,"");const r=o.split(",");if(r.length>2&&(o=r[0]+","+r.slice(1).join("")),r[1]&&r[1].length>2&&(o=r[0]+","+r[1].substring(0,2)),o){const[e,t]=o.split(","),n=e.replace(/\B(?=(\d{3})+(?!\d))/g,".");o=void 0!==t?`${n},${t}`:n}e.target.value=o;const s=t+(o.length-n.length);e.target.setSelectionRange(s,s)}),e.value){const t=parseFloat(e.value);isNaN(t)||(e.value=this.format(t))}const t=e.closest("form");t&&t.addEventListener("submit",n=>{const o=this.parse(e.value),r=document.createElement("input");r.type="hidden",r.name=e.name,r.value=o,e.disabled=!0,t.appendChild(r)})}},o={init(t){if(!t)return;const n=t.querySelectorAll("[required]"),o=t.querySelector('button[type="submit"]');n.forEach(e=>{e.addEventListener("blur",()=>{this.validateField(e)}),e.addEventListener("input",()=>{this.clearError(e),this.updateSubmitButton(t,o)})}),t.addEventListener("submit",t=>{let o=!0;n.forEach(e=>{this.validateField(e)||(o=!1)}),o||(t.preventDefault(),e.error("Por favor, corrija os erros no formulário."))}),this.updateSubmitButton(t,o)},validateField(e){const t=e.value.trim();let o="";if(e.hasAttribute("required")&&!t)o="Este campo é obrigatório.";else if("SELECT"===e.tagName&&""===t)o="Por favor, selecione uma opção.";else if("number"===e.type||e.classList.contains("currency-input")){const r="number"===e.type?parseFloat(t):n.parse(t);isNaN(r)&&(o="Por favor, insira um valor válido.")}else"id_name"===e.id&&t.length>0&&t.length<2?o="O nome deve ter pelo menos 2 caracteres.":e.minLength&&t.length<e.minLength?o=`Mínimo de ${e.minLength} caracteres.`:e.maxLength&&e.maxLength>0&&t.length>e.maxLength&&(o=`Máximo de ${e.maxLength} caracteres.`);return o?(this.showError(e,o),!1):(this.showSuccess(e),!0)},showSuccess(e){this.clearError(e),e.value.trim()&&e.classList.add("border-green-500")},showError(e,t){this.clearError(e),e.classList.remove("border-slate-700","focus:ring-primary-600"),e.classList.add("border-red-500","focus:ring-red-500");const n=document.createElement("div");n.className="field-error mt-2",n.innerHTML=`\n        <p class="text-sm text-red-400 flex items-center">\n          <svg class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />\n          </svg>\n          ${t}\n        </p>\n      `;(e.closest(".relative")||e.parentElement).appendChild(n)},clearError(e){e.classList.remove("border-red-500","focus:ring-red-500","border-green-500"),e.classList.add("border-slate-700","focus:ring-primary-600");const t=(e.closest(".relative")||e.parentElement).querySelector(".field-error");t&&t.remove()},updateSubmitButton(e,t){if(!t)return;const n=e.querySelectorAll("[required]");let o=!0;n.forEach(e=>{e.value.trim()||(o=!1)}),o?(t.disabled=!1,t.classList.remove("opacity-50","cursor-not-allowed")):(t.disabled=!0,t.classList.add("opacity-50","cursor-not-allowed"))}},r={show(e){e&&(e.dataset.originalContent=e.innerHTML,e.disabled=!0,e.classList.add("opacity-75","cursor-not-allowed"),e.innerHTML='\n        <svg class="animate-spin h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24">\n          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n        </svg>\n        Salvando...\n      ')},hide(e){e&&(e.dataset.originalContent&&(e.innerHTML=e.dataset.originalContent,delete e.dataset.originalContent),e.disabled=!1,e.classList.remove("opacity-75","cursor-not-allowed"))}};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href*="/delete/"]').forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();const o=e.closest(".bg-slate-800")?.querySelector(".text-xl.font-bold")?.textContent||"esta conta";t.show(`Tem certeza que deseja excluir "${o}"?`,()=>{window.location.href=e.href})})});const s=document.querySelector('form[method="post"]');s&&(o.init(s),s.addEventListener("submit",e=>{const t=s.querySelector('button[type="submit"]');t&&!t.disabled&&r.show(t)}));const i=document.querySelector("#id_initial_balance");i&&(i.classList.add("currency-input"),n.applyToInput(i));document.querySelectorAll(".alert-success, .bg-green-900\\/30").forEach(t=>{const n=t.textContent.trim();n&&(e.success(n),t.style.display="none")});document.querySelectorAll(".alert-error, .bg-red-900\\/30").forEach(t=>{const n=t.textContent.trim();n&&!t.closest("form")&&(e.error(n),t.style.display="none")})}),window.DeleteModal=t,window.Toast=e,window.CurrencyFormatter=n,window.FormValidator=o,window.LoadingState=r}();