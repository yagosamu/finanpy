!function(){"use strict";const e={init(e){e.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),t.length>=11?t=t.replace(/^(\d{2})(\d{5})(\d{4}).*/,"($1) $2-$3"):t.length>=7?t=t.replace(/^(\d{2})(\d{5})(\d{0,4}).*/,"($1) $2-$3"):t.length>=2?t=t.replace(/^(\d{2})(\d{0,5})/,"($1) $2"):t.length>0&&(t=t.replace(/^(\d*)/,"($1")),e.target.value=t})}},t={init(e){const t=document.getElementById("id_first_name"),r=document.getElementById("id_last_name"),s=document.getElementById("id_phone"),n=document.getElementById("id_birth_date");t&&(t.addEventListener("blur",()=>{this.validateFirstName(t)}),t.addEventListener("input",()=>{this.clearError(t)})),r&&(r.addEventListener("blur",()=>{this.validateLastName(r)}),r.addEventListener("input",()=>{this.clearError(r)})),s&&(s.addEventListener("blur",()=>{this.validatePhone(s)}),s.addEventListener("input",()=>{this.clearError(s)})),n&&(n.addEventListener("blur",()=>{this.validateBirthDate(n)}),n.addEventListener("input",()=>{this.clearError(n)})),e.addEventListener("submit",o=>{let a=!0;if(t&&!this.validateFirstName(t)&&(a=!1),r&&!this.validateLastName(r)&&(a=!1),s&&!this.validatePhone(s)&&(a=!1),n&&!this.validateBirthDate(n)&&(a=!1),!a){o.preventDefault();const t=e.querySelector(".field-error");t&&t.scrollIntoView({behavior:"smooth",block:"center"})}})},validateFirstName(e){const t=e.value.trim();if(!t)return this.clearError(e),!0;if(t.length<2)return this.showError(e,"O nome deve ter no mínimo 2 caracteres."),!1;return/^[a-zA-ZÀ-ÿ\s'-]+$/.test(t)?(this.showSuccess(e),!0):(this.showError(e,"O nome deve conter apenas letras, espaços e hífens."),!1)},validateLastName(e){const t=e.value.trim();if(!t)return this.clearError(e),!0;if(t.length<2)return this.showError(e,"O sobrenome deve ter no mínimo 2 caracteres."),!1;return/^[a-zA-ZÀ-ÿ\s'-]+$/.test(t)?(this.showSuccess(e),!0):(this.showError(e,"O sobrenome deve conter apenas letras, espaços e hífens."),!1)},validatePhone(e){const t=e.value.trim();if(!t)return this.clearError(e),!0;const r=t.replace(/\D/g,"");return r.length<10||r.length>11?(this.showError(e,"O telefone deve ter 10 ou 11 dígitos."),!1):11===r.length&&"9"!==r[2]?(this.showError(e,"Celular deve ter o dígito 9 após o DDD."),!1):(this.showSuccess(e),!0)},validateBirthDate(e){const t=e.value.trim();if(!t)return this.clearError(e),!0;const r=new Date(t+"T00:00:00"),s=new Date;if(s.setHours(0,0,0,0),isNaN(r.getTime()))return this.showError(e,"Data de nascimento inválida."),!1;if(r>=s)return this.showError(e,"A data de nascimento deve estar no passado."),!1;const n=s.getFullYear()-r.getFullYear(),o=s.getMonth()-r.getMonth(),a=s.getDate()-r.getDate(),i=o<0||0===o&&a<0?n-1:n;return i<18?(this.showError(e,"Você deve ter pelo menos 18 anos."),!1):i>120?(this.showError(e,"Data de nascimento inválida."),!1):(this.showSuccess(e),!0)},showError(e,t){this.clearError(e),e.classList.add("border-red-500"),e.classList.remove("border-green-500");const r=document.createElement("div");r.className="field-error mt-2",r.innerHTML=`\n        <p class="text-sm text-red-400 flex items-center">\n          <svg class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />\n          </svg>\n          ${t}\n        </p>\n      `;(e.closest(".relative")||e.parentElement).appendChild(r)},clearError(e){e.classList.remove("border-red-500"),e.classList.remove("border-green-500");const t=e.closest(".relative")||e.parentElement,r=t.querySelector(".field-error");r&&r.remove();const s=t.querySelector(".success-icon");s&&s.remove()},showSuccess(e){this.clearError(e),e.classList.add("border-green-500");const t=e.closest(".relative")||e.parentElement,r=document.createElement("div");r.className="success-icon mt-2",r.innerHTML='\n        <p class="text-sm text-green-400 flex items-center">\n          <svg class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n          </svg>\n          Válido\n        </p>\n      ',t.appendChild(r)}};document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector('form[method="post"]');r&&t.init(r);const s=document.getElementById("id_phone");s&&e.init(s)}),window.ProfileFormValidator=t,window.PhoneMask=e}();